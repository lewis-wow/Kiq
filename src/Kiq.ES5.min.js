//Ludv√≠k Prokopec, MIT
!function(n,t){function e(n){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(n)}"object"===("undefined"==typeof exports?"undefined":e(exports))&&"undefined"!=typeof module?module.exports=t(e):"function"==typeof define&&define.amd?define(function(){return t(e)}):(n=n||self).Kiq=t(e)}(this,function(u){"use strict";function v(){return(v=Object.assign||function(n){for(var t=1;t<arguments.length;t++){var e,r=arguments[t];for(e in r)Object.prototype.hasOwnProperty.call(r,e)&&(n[e]=r[e])}return n}).apply(this,arguments)}function h(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(n)))return;var e=[],r=!0,o=!1,i=void 0;try{for(var u,_=n[Symbol.iterator]();!(r=(u=_.next()).done)&&(e.push(u.value),!t||e.length!==t);r=!0);}catch(n){o=!0,i=n}finally{try{r||null==_.return||_.return()}finally{if(o)throw i}}return e}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return r(n,t);var e=Object.prototype.toString.call(n).slice(8,-1);"Object"===e&&n.constructor&&(e=n.constructor.name);if("Map"===e||"Set"===e)return Array.from(n);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return r(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(n,t){(null==t||t>n.length)&&(t=n.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=n[e];return r}function t(t,n){var e,r=Object.keys(t);return Object.getOwnPropertySymbols&&(e=Object.getOwnPropertySymbols(t),n&&(e=e.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,e)),r}function f(r){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?t(Object(o),!0).forEach(function(n){var t,e;t=r,n=o[e=n],e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):t(Object(o)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(o,n))})}return r}function m(n){return Array.isArray(n)}function _(n){return!(!c(n)||!n.prototype.isKiqComponent)}function c(n){return"function"==typeof n}function a(n){return"object"===u(n)&&null!==n}function d(n){var t=new n.__t(n.props);return t.__i.__v=t.Element(t.props,t.state),t.__t=n.__t,t}function n(n){return this.props=n,this.state={},this.__i={__r:null,__v:null},this}function o(n,t,e){return a(t)&&v(n.props,t),a(e)&&v(n.state,e),n}function y(t){t.onComponentWillUnMount(t.__i.__r),t.setState=function(){t.setState=function(){};var n=t.constructor.name;throw Error("Remove all asynchronnous functions that causes setState(...) of ".concat(n," in onComponentWillUnMount, else it causes memory leak"))}}function b(n,t,e){if(!n)return e;var r=h(n,2),n=r[0],r=r[1];return n?t(n,r):e}function g(n,t,e){if(!n.shouldComponentUpdate(t,e))return(n=o(n,t,e)).onComponentCancelUpdate(),!1;var r=n.getSnapshotBeforeUpdate()||null;o(n,t,e),n.onComponentWillUpdate(r);e=n.Element(n.props,n.state);return[E(n.__i.__v,e),r]}function O(n){if(null==n)throw Error("virtual node cannot be null or undefined");if(!a(n))return{__r:document.createTextNode(n),__v:n};if(m(n)){for(var t=[],e=0;e<n.length;e++)t.push(O(n[e]));return t}if(_(n.__t)){var r=d(n),o=r.__i,i=O(o.__v);return v(o,i),r.onComponentRender(i.__r),r.setState=function(n){return function(r,n){var t;if(a(n))t=n;else{if(!c(n))throw TypeError("setState(...) expecting 1 parameter as Function or Object, you give ".concat(u(n)));t=n.bind(r)(r.props,r.state)}if(Object.keys(t).length)return b(g(r,null,t),function(n,t){var e=r.__i,n=n(e.__r);v(e,{__v:n.__v,__r:n.__r}),r.onComponentUpdate(t)},null),r;throw Error("setState(...) must be Object or Function that returns Object, if Object is empty or doesn't return nothing, update can be redundant")}(r,n)},{__v:r,__r:i.__r,_key:n._key}}i=function(n){var e=document.createElement(n.__t),t=n.props,r={};Object.keys(t).filter(s).forEach(function(n){return r[n]=t[n],l(n)?e.addEventListener(p(n),t[n]):a(t[n])?v(e[n],t[n]):e[n]=t[n]});var o=t.children,i=[];if(o)for(var u=function(n){var t=O(o[n]);m(t)?function(t,e){for(var r=0;r<t.length;r++)!function(){var n=t[r];C(n,e,function(){e.appendChild(n.__r)})}()}(t,e):C(t,e,function(){e.appendChild(t.__r)}),i.push(t)},_=0;_<o.length;_++)u(_);var c=n._key;return{__v:{__t:n.__t,props:f({children:i},r)},__r:e,_key:c,_ref:n._ref}}(n);return i._ref&&i._ref(i.__r),i}function C(n,t,e){var r=n.__v;a(r)&&_(r.__t)?(n=r.__i,r.onComponentWillMount(n.__r,t),e(),r.onComponentMount(n.__r,t)):e()}function p(n){return n.replace("on","")}function l(n){return 0===n.indexOf("on")}function s(n){return"children"!==n}function E(t,e){if(void 0===e)return function(n){!function n(t){if(a(t))if(_(t.__t))y(t),n(t.__i.__v);else for(var e=m(t)?t:t.props.children,r=0;r<e.length;r++)n(e[r].__v)}(t.__v),n.remove()};var n=a(t),r=a(e);if(!n||!r)return function(n,e,t,r){if(t||r)return function(n){var t=O(e);return C(t,n.parentNode,function(){n.replaceWith(t.__r)}),t};return n!==e?function(n){return{__v:n.nodeValue=e,__r:n}}:null}(t,e,n,r);n=_(t.__t),r=_(e.__t);if(n||r)return function(o,i,n,t){if(n&&t){if(o.__t===i.__t){var e=function(n,t){return n.componentWillGetProps(t)||null}(o,i.props);return b(g(o,i.props,e),function(e,r){return function(n){var t=e(n);return v(o.__i,{__v:t.__v,__r:t.__r}),o.onComponentUpdate(r),{__v:o,__r:n,_key:i._key}}},null)}var r=d(i),u=r.__i,_=o.__i,c=E(_.__v,r.__i.__v);return y(o),function(n){r.onComponentWillMount(n,n.parentNode);n=c?c(n):_;v(u,{__v:n.__v,__r:n.__r});n=u.__r;return r.onComponentMount(n,n.parentNode),{__v:r,__r:n,_key:i._key}}}if(n&&!t){var f=o.__i,a=E(f.__v,i);return y(o),a?function(n){return a(n)}:function(n){return{__v:f.__v,__r:n,_key:i._key}}}var p=d(i),l=p.__i,s=E(o,l.__v);return function(n){p.onComponentWillMount(n,n.parentNode);n=s?s(n):{__v:o,__r:n};v(l,{__v:n.__v,__r:n.__r});n=l.__r;return p.onComponentMount(n,n.parentNode),{__v:p,__r:n,_key:i._key}}}(t,e,n,r);if(t.__t!==e.__t)return function(n){var t=O(e);return C(t,n.parentNode,function(){n.replaceWith(t.__r)}),t};var o=function(e,r){var o=[],i={};{var t;Object.keys(r).filter(s).forEach(function(t){var n=!1;l(t)?t in e||(o.push(function(n){n.addEventListener(p(t),r[t])}),n=!0):a(r[t])?(o.push(function(n){v(n[t],r[t])}),n=!0):r[t]===e[t]&&t in e||(o.push(function(n){n[t]=r[t]}),n=!0),i[t]=(n?r:e)[t]}),e.children.length+r.children.length!==0&&(t=function i(u,_){var c=[];var f=[];var a=[];var n=j(u),t=h(n,2),p=t[0],n=t[1];var t=j(_),t=h(t,2),l=t[0],t=t[1];var e=Math.max(t.length,n.length);var r=function(t){var e,r,o,n=u[t];m(n)?(e=i(n,_[t]))?a.push(function(n){c[t]=e(n)}):c[t]=n:void 0===n?(r=O(_[t]),c[t]=r,a.push(function(n){C(r,n,function(){n.appendChild(r.__r)})})):(o=E(n.__v,_[t]))?(n.patch=function(n){var n=o(n);void 0!==n&&(c[t]=n)},f.push(t)):c[t]=n};for(var o=0;o<e;o++)r(o);var s=function(n){var t=p[n],e=l[n],r=u[t],o=E(r.__v,_[e]);o?(r.patch=function(n){var n=o(n);void 0!==n&&(c[e]=n)},f.push(t)):c[e]=r,delete l[n]};for(var v in p)s(v);var d=function(n){var t=l[n],e=O(_[t]);c[t]=e,a.push(function(n){C(e,n,function(){n.insertBefore(e.__r,n.childNodes[t])})})};for(var y in l)d(y);if(a.length+f.length===0)return null;return function(n){for(var t=0;t<f.length;t++){var e=u[f[t]];e.patch(e.__r)}for(var r=0;r<a.length;r++)a[r](n);return c}}(e.children,r.children))?o.push(function(n){i.children=t(n)}):i.children=e.children}return Object.keys(e).filter(s).forEach(function(t){t in r||(l(t)?o.push(function(n){n.removeEventListener(p(t),e[t])}):o.push(function(n){n[t]=null,n.removeAttribute(t)}))}),o.length?function(n){for(var t=0;t<o.length;t++)o[t](n);return i}:null}(t.props,e.props);return o?function(n){return t.props=o(n),{__v:t,__r:n,_key:e._key}}:null}function j(n){for(var t={},e=[],r=0;r<n.length;r++){var o=n[r]._key;o?o in t||(t[o]=r):e.push(r)}return[t,e]}return n.prototype.Element=function(){throw Error("You have to specify Element method in your Component, Element must return virtual element")},n.prototype.setState=function(){throw Error("setState(...) can be called only if component is rendered, will be mounted or is mounted")},n.prototype.onComponentRender=n.prototype.onComponentWillUpdate=n.prototype.onComponentUpdate=n.prototype.onComponentWillMount=n.prototype.onComponentMount=n.prototype.onComponentCancelUpdate=n.prototype.getSnapshotBeforeUpdate=n.prototype.componentWillGetProps=n.prototype.onComponentWillUnMount=function(){},n.prototype.shouldComponentUpdate=function(){return!0},n.prototype.isKiqComponent=!0,{Component:n,render:function(t,e,r){window.requestAnimationFrame(function(){if(!e||e.nodeType!==Node.ELEMENT_NODE)throw TypeError("render(...) container must be valid Element that is already rendered on page, try to use DOMContentLoaded event on window to wait for all Elements load");var n=O(t);C(n.__v,e,function(){e.appendChild(n.__r)}),r&&r()})},createElement:function(n){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,e=null,r=null;"_key"in(t=t||{})&&(e=t._key.toString()),"_ref"in t&&(r=t._ref);for(var o=arguments.length,i=new Array(2<o?o-2:0),u=2;u<o;u++)i[u-2]=arguments[u];return!i.length&&_(n)||(t=f({children:i},t)),{__t:n,props:t,_key:e,_ref:r}}}});