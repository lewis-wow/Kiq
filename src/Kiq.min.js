// LudvÃ­k Prokopec MIT
!function(n,e){function t(n){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(n)}"object"===("undefined"==typeof exports?"undefined":t(exports))&&"undefined"!=typeof module?module.exports=e(t):"function"==typeof define&&define.amd?define(function(){return e(t)}):(n=n||self).Kiq=e(t)}(this,function(u){"use strict";function m(n,e){return function(n){if(Array.isArray(n))return n}(n)||function(n,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(n)))return;var t=[],r=!0,o=!1,i=void 0;try{for(var u,a=n[Symbol.iterator]();!(r=(u=a.next()).done)&&(t.push(u.value),!e||t.length!==e);r=!0);}catch(n){o=!0,i=n}finally{try{r||null==a.return||a.return()}finally{if(o)throw i}}return t}(n,e)||function(n,e){if(!n)return;if("string"==typeof n)return r(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);"Object"===t&&n.constructor&&(t=n.constructor.name);if("Map"===t||"Set"===t)return Array.from(n);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return r(n,e)}(n,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function v(){return(v=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t,r=arguments[e];for(t in r)Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}return n}).apply(this,arguments)}function e(e,n){var t,r=Object.keys(e);return Object.getOwnPropertySymbols&&(t=Object.getOwnPropertySymbols(e),n&&(t=t.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,t)),r}function p(r){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?e(Object(o),!0).forEach(function(n){var e,t;e=r,n=o[t=n],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):e(Object(o)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(o,n))})}return r}function O(n){return Array.isArray(n)}function a(n){return!(!l(n)||!n.prototype.isKiqComponent)}function l(n){return"function"==typeof n}function c(n){return"object"===u(n)&&null!==n}function o(n,e,t){return c(e)&&v(n.props,e),c(t)&&v(n.state,t),n}function n(n){return this.props=n,this.state={},this._i={_r:null,_v:null},this}function y(n){var e=new n.type(n.props);return e._i._v=e.Element(e.props,e.state),e.type=n.type,e}function h(e){e.onComponentWillUnMount(e._i._r),e.setState=function(){e.setState=function(){};var n=e.constructor.name;throw Error("Remove all asynchronnous functions that causes setState(...) of ".concat(n," in onComponentWillUnMount, else it causes memory leak"))}}function b(n,e,t){if(!n)return t;var r=m(n,2),n=r[0],r=r[1];return n?e(n,r):t}function M(n,e,t){if(!n.shouldComponentUpdate(e,t))return(n=o(n,e,t)).onComponentCancelUpdate(),!1;var r=n.getSnapshotBeforeUpdate()||null;o(n,e,t),n.onComponentWillUpdate(r);t=n.Element(n.props,n.state);return[_(n._i._v,t),r]}function f(n){var t=document.createElement(n.type),e=n.props,r={};Object.keys(e).filter(g).forEach(function(n){return r[n]=e[n],s(n)?t.addEventListener(d(n),e[n]):c(e[n])?v(t[n],e[n]):t[n]=e[n]});var o=e.children,i=[];if(o)for(var u=function(n){var e=D(o[n]);O(e)?function(e,t){for(var r=0;r<e.length;r++)!function(){var n=e[r];N(n,t,function(){return t.appendChild(n._r)})}()}(e,t):N(e,t,function(){return t.appendChild(e._r)}),i.push(e)},a=0;a<o.length;a++)u(a);var l=n._key;return{_v:{type:n.type,props:p({children:i},r)},_r:t,_key:l,_ref:n._ref}}function N(n,e,t){var r=n._v;c(r)&&a(r.type)?(n=r._i,r.onComponentWillMount(n._r,e),t(),r.onComponentMount(n._r,e)):t()}function D(n){if(null==n)throw Error("virtual node cannot be null or undefined");if(!c(n))return{_r:document.createTextNode(n),_v:n};if(O(n)){for(var e=[],t=0;t<n.length;t++)e.push(D(n[t]));return e}if(a(n.type)){var r=y(n),o=r._i,i=D(o._v);return v(o,i),r.onComponentRender(i._r),r.setState=function(n){return function(r,n){var e;if(c(n))e=n;else{if(!l(n))throw TypeError("setState(...) expecting 1 parameter as Function or Object, you give ".concat(u(n)));e=n.bind(r)(r.props,r.state)}if(Object.keys(e).length)return b(M(r,null,e),function(n,e){var t=r._i,n=n(t._r);v(t,{_v:n._v,_r:n._r}),r.onComponentUpdate(e)},null),r;throw Error("setState(...) must be Object or Function that returns Object, if Object is empty or doesn't return nothing, update can be redundant")}(r,n)},{_v:r,_r:i._r,_key:n._key}}i=f(n);return i._ref&&i._ref(i._r),i}function d(n){return n.replace("on","")}function s(n){return 0===n.indexOf("on")}function g(n){return"children"!==n}function _(e,t){if(void 0===t)return function(n){!function n(e){if(c(e))if(a(e.type))h(e),n(e._i._v);else for(var t=O(e)?e:e.props.children,r=0;r<t.length;r++)n(t[r]._v)}(e._v),n.remove()};var n=c(e),r=c(t);if(!n||!r)return function(n,t,e,r){if(e||r)return function(n){var e=D(t);return N(e,n.parentNode,function(){n.replaceWith(e._r)}),e};return n!==t?function(n){return{_v:n.nodeValue=t,_r:n}}:null}(e,t,n,r);n=a(e.type),r=a(t.type);if(n||r)return function(o,i,n,e){if(n&&e){if(o.type===i.type){var t=function(n,e){return n.componentWillGetProps(e)||null}(o,i.props);return b(M(o,i.props,t),function(t,r){return function(n){var e=t(n);return v(o._i,{_v:e._v,_r:e._r}),o.onComponentUpdate(r),{_v:o,_r:n,_key:i._key}}},null)}var r=y(i),u=r._i,a=o._i,l=_(a._v,r._i._v);return h(o),function(n){r.onComponentWillMount(n,n.parentNode);n=l?l(n):a;v(u,{_v:n._v,_r:n._r});n=u._r;return r.onComponentMount(n,n.parentNode),{_v:r,_r:n,_key:i._key}}}if(n&&!e){var p=o._i,c=_(p._v,i);return h(o),c?function(n){return c(n)}:function(n){return{_v:p._v,_r:n,_key:i._key}}}var f=y(i),d=f._i,s=_(o,d._v);return function(n){f.onComponentWillMount(n,n.parentNode);n=s?s(n):{_v:o,_r:n};v(d,{_v:n._v,_r:n._r});n=d._r;return f.onComponentMount(n,n.parentNode),{_v:f,_r:n,_key:i._key}}}(e,t,n,r);if(e.type!==t.type)return function(n){var e=D(t);return N(e,n.parentNode,function(){n.replaceWith(e._r)}),e};var o=function(t,r){var o=[],i={};{var e;Object.keys(r).filter(g).forEach(function(e){var n=!1;s(e)?e in t&&t[e]===r[e]||(o.push(function(n){n.addEventListener(d(e),r[e])}),n=!0):c(r[e])?(o.push(function(n){v(n[e],r[e])}),n=!0):r[e]===t[e]&&e in t||(o.push(function(n){n[e]=r[e]}),n=!0),i[e]=(n?r:t)[e]}),t.children.length+r.children.length!==0&&(e=function i(u,a){var l=[];var p=[];var c=[];var n=C(u),e=m(n,2),f=e[0],n=e[1];var e=C(a),e=m(e,2),d=e[0],e=e[1];var t=Math.max(e.length,n.length);var r=function(e){var t,r,o,n=u[e];O(n)?(t=i(n,a[e]))?c.push(function(n){l[e]=t(n)}):l[e]=n:void 0===n?(r=D(a[e]),l[e]=r,c.push(function(n){N(r,n,function(){n.appendChild(r._r)})})):(o=_(n._v,a[e]))?(n.patch=function(n){var n=o(n);void 0!==n&&(l[e]=n)},p.push(e)):l[e]=n};for(var o=0;o<t;o++)r(o);var s=function(n){var e=f[n],t=d[n],r=u[e],o=_(r._v,a[t]);o?(r.patch=function(n){var n=o(n);void 0!==n&&(l[t]=n)},p.push(e)):l[t]=r,delete d[n]};for(var v in f)s(v);var y=function(n){var e=d[n],t=D(a[e]);l[e]=t,c.push(function(n){N(t,n,function(){n.insertBefore(t._r,n.childNodes[e])})})};for(var h in d)y(h);if(c.length+p.length===0)return null;return function(n){for(var e=0;e<p.length;e++){var t=u[p[e]];t.patch(t._r)}for(var r=0;r<c.length;r++)c[r](n);return l}}(t.children,r.children))?o.push(function(n){i.children=e(n)}):i.children=t.children}return Object.keys(t).filter(g).forEach(function(e){s(e)?e in r&&t[e]===r[e]||o.push(function(n){n.removeEventListener(d(e),t[e])}):e in r||o.push(function(n){n[e]=null})}),o.length?function(n){for(var e=0;e<o.length;e++)o[e](n);return i}:null}(e.props,t.props);return o?function(n){return e.props=o(n),{_v:e,_r:n,_key:t._key}}:null}function C(n){for(var e={},t=[],r=0;r<n.length;r++){var o=n[r]._key;o?o in e||(e[o]=r):t.push(r)}return[e,t]}function i(e,t,r){window.requestAnimationFrame(function(){if(!t||t.nodeType!==Node.ELEMENT_NODE)throw TypeError("render(...) container must be valid Element that is already rendered on page, try to use DOMContentLoaded event on window to wait for all Elements load");var n=D(e);r(n)})}return n.prototype.Element=function(){throw Error("You have to specify Element method in your Component, Element must return virtual element")},n.prototype.setState=function(){throw Error("setState(...) can be called only if component is rendered, will be mounted or is mounted")},n.prototype.onComponentRender=n.prototype.onComponentWillUpdate=n.prototype.onComponentUpdate=n.prototype.onComponentWillMount=n.prototype.onComponentMount=n.prototype.onComponentCancelUpdate=n.prototype.getSnapshotBeforeUpdate=n.prototype.componentWillGetProps=n.prototype.onComponentWillUnMount=function(){},n.prototype.shouldComponentUpdate=function(){return!0},n.prototype.isKiqComponent=!0,{Component:n,render:function(n,t,r){i(n,t,function(n){var e=n._r;N(n,t,function(){return t.appendChild(e)}),r&&r(e)})},createElement:function(n){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,t=null,r=null;"_key"in(e=e||{})&&(t=e._key.toString()),"_ref"in e&&(r=e._ref);for(var o=arguments.length,i=new Array(2<o?o-2:0),u=2;u<o;u++)i[u-2]=arguments[u];return!i.length&&a(n)||(e=p({children:i},e)),{type:n,props:e,_key:t,_ref:r}},replace:function(n,t,r){i(n,t,function(n){var e=n._r;N(n,t,function(){return t.replaceWith(e)}),r&&r(e)})}}});