// LudvÃ­k Prokopec MIT
!function(e,n){function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}"object"===("undefined"==typeof exports?"undefined":t(exports))&&"undefined"!=typeof module?module.exports=n(t):"function"==typeof define&&define.amd?define(function(){return n(t)}):(e=e||self).Kiq=n(t)}(this,function(o){"use strict";function m(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var t=[],r=!0,o=!1,i=void 0;try{for(var u,a=e[Symbol.iterator]();!(r=(u=a.next()).done)&&(t.push(u.value),!n||t.length!==n);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==a.return||a.return()}finally{if(o)throw i}}return t}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return r(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return r(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function v(){return(v=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t,r=arguments[n];for(t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e}).apply(this,arguments)}function n(n,e){var t,r=Object.keys(n);return Object.getOwnPropertySymbols&&(t=Object.getOwnPropertySymbols(n),e&&(t=t.filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})),r.push.apply(r,t)),r}function l(r){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?n(Object(o),!0).forEach(function(e){var n,t;n=r,e=o[t=e],t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):n(Object(o)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(o,e))})}return r}function O(e){return Array.isArray(e)}function a(e){return!(!i(e)||!e.prototype.isKiqComponent)}function i(e){return"function"==typeof e}function p(e){return"object"===o(e)&&null!==e}function u(e,n,t){return p(n)&&v(e.props,n),p(t)&&v(e.state,t),e}function e(e){return this.props=e,this.state={},this._i={_r:null,_v:null},this}function y(e){var n=new e.type(e.props);return n._i._v=n.Element(n.props,n.state),n.type=e.type,n}function c(e,n){var t,r;if(p(n))t=n;else{if(!i(n))throw TypeError("setState(...) expecting 1 parameter as Function or Object, you give ".concat(o(n)));t=n.bind(e)(e.props,e.state)}if(Object.keys(t).length)return b(M(r=e,null,t),function(e,n){var t=r._i,e=e(t._r);v(t,{_v:e._v,_r:e._r}),r.onComponentUpdate(n)},null),r;throw Error("setState(...) must be Object or Function that returns Object, if Object is empty or doesn't return nothing, update can be redundant")}function h(n){n.onComponentWillUnMount(n._i._r),n.setState=function(){n.setState=function(){};var e=n.constructor.name;throw Error("Remove all asynchronnous functions that causes setState(...) of ".concat(e," in onComponentWillUnMount, else it causes memory leak"))}}function b(e,n,t){if(!e)return t;var r=m(e,2),e=r[0],r=r[1];return e?n(e,r):t}function M(e,n,t){if(!e.shouldComponentUpdate(n,t))return(e=u(e,n,t)).onComponentCancelUpdate(),!1;var r=e.getSnapshotBeforeUpdate()||null;u(e,n,t),e.onComponentWillUpdate(r);t=e.Element(e.props,e.state);return[_(e._i._v,t),r]}function f(e){var t=document.createElement(e.type),n=e.props,r={};Object.keys(n).filter(D).forEach(function(e){return r[e]=n[e],s(e)?t.addEventListener(d(e),n[e]):p(n[e])?v(t[e],n[e]):t[e]=n[e]});var o=n.children,i=[];if(o)for(var u=function(e){var n=g(o[e]);O(n)?function(n,t){for(var r=0;r<n.length;r++)!function(){var e=n[r];N(e,t,function(){t.appendChild(e._r)})}()}(n,t):N(n,t,function(){t.appendChild(n._r)}),i.push(n)},a=0;a<o.length;a++)u(a);return{_v:{type:e.type,props:l({children:i},r)},_r:t,_key:e._key,_ref:e._ref}}function N(e,n,t){var r,o=e._v;return p(o)&&a(o.type)?(r=o._i,o.onComponentWillMount(r._r,n),t(),o.onComponentMount(r._r,n)):t(),e}function g(e){if(null==e)throw Error("virtual node cannot be null or undefined");if(!p(e))return{_r:document.createTextNode(e),_v:e};if(O(e)){for(var n=[],t=0;t<e.length;t++)n.push(g(e[t]));return n}if(a(e.type)){var r=y(e),o=r._i,i=g(o._v);return v(o,i),r.onComponentRender(i._r),r.setState=function(e){return c(r,e)},{_v:r,_r:i._r,_key:e._key}}i=f(e);return i._ref&&i._ref(i._r),i}function d(e){return e.replace("on","")}function s(e){return 0===e.indexOf("on")}function D(e){return"children"!==e}function _(n,t){if(void 0===t)return function(e){!function e(n){if(p(n))if(a(n.type))h(n),e(n._i._v);else for(var t=O(n)?n:n.props.children,r=0;r<t.length;r++)e(t[r]._v)}(n._v),e.remove()};var e=p(n),r=p(t);if(!e||!r)return function(e,t,n,r){if(n||r)return function(e){var n=g(t);return N(n,e.parentNode,function(){e.replaceWith(n._r)}),n};return e!==t?function(e){return{_v:e.nodeValue=t,_r:e}}:null}(n,t,e,r);e=a(n.type),r=a(t.type);if(e||r)return function(o,i,e,n){if(e&&n){if(o.type===i.type){var t=function(e,n){return e.componentWillGetProps(n)||null}(o,i.props);return b(M(o,i.props,t),function(t,r){return function(e){var n=t(e);return v(o._i,{_v:n._v,_r:n._r}),o.onComponentUpdate(r),{_v:o,_r:e,_key:i._key}}},null)}var r=y(i),u=r._i,a=o._i,l=_(a._v,r._i._v);return h(o),function(e){r.onComponentWillMount(e,e.parentNode);e=l?l(e):a;v(u,{_v:e._v,_r:e._r});e=u._r;return r.onComponentMount(e,e.parentNode),{_v:r,_r:e,_key:i._key}}}if(e&&!n){var p=o._i,c=_(p._v,i);return h(o),c?function(e){return c(e)}:function(e){return{_v:p._v,_r:e,_key:i._key}}}var f=y(i),d=f._i,s=_(o,d._v);return function(e){f.onComponentWillMount(e,e.parentNode);e=s?s(e):{_v:o,_r:e};v(d,{_v:e._v,_r:e._r});e=d._r;return f.onComponentMount(e,e.parentNode),{_v:f,_r:e,_key:i._key}}}(n,t,e,r);if(n.type!==t.type)return function(e){var n=g(t);return N(n,e.parentNode,function(){e.replaceWith(n._r)}),n};var o=function(t,r){var o=[],i={};{var n;Object.keys(r).filter(D).forEach(function(n){var e=!1;s(n)?n in t&&t[n]===r[n]||(o.push(function(e){e.addEventListener(d(n),r[n])}),e=!0):p(r[n])?(o.push(function(e){v(e[n],r[n])}),e=!0):r[n]===t[n]&&n in t||(o.push(function(e){e[n]=r[n]}),e=!0),i[n]=(e?r:t)[n]}),t.children.length+r.children.length!==0&&(n=function i(u,a){var l=[];var p=[];var c=[];var e=C(u),n=m(e,2),f=n[0],e=n[1];var n=C(a),n=m(n,2),d=n[0],n=n[1];var t=Math.max(n.length,e.length);var r=function(n){var t,r,o,e=u[n];O(e)?(t=i(e,a[n]))?c.push(function(e){l[n]=t(e)}):l[n]=e:void 0===e?(r=g(a[n]),l[n]=r,c.push(function(e){N(r,e,function(){e.appendChild(r._r)})})):(o=_(e._v,a[n]))?(e.patch=function(e){var e=o(e);void 0!==e&&(l[n]=e)},p.push(n)):l[n]=e};for(var o=0;o<t;o++)r(o);var s=function(e){var n=f[e],t=d[e],r=u[n],o=_(r._v,a[t]);o?(r.patch=function(e){var e=o(e);void 0!==e&&(l[t]=e)},p.push(n)):l[t]=r,delete d[e]};for(var v in f)s(v);var y=function(e){var n=d[e],t=g(a[n]);l[n]=t,c.push(function(e){N(t,e,function(){e.insertBefore(t._r,e.childNodes[n])})})};for(var h in d)y(h);if(c.length+p.length===0)return null;return function(e){for(var n=0;n<p.length;n++){var t=u[p[n]];t.patch(t._r)}for(var r=0;r<c.length;r++)c[r](e);return l}}(t.children,r.children))?o.push(function(e){i.children=n(e)}):i.children=t.children}return Object.keys(t).filter(D).forEach(function(n){n in r&&t[n]===r[n]||(s(n)?o.push(function(e){e.removeEventListener(d(n),t[n])}):o.push(function(e){e[n]=null,e.removeAttribute(n)}))}),o.length?function(e){for(var n=0;n<o.length;n++)o[n](e);return i}:null}(n.props,t.props);return o?function(e){return n.props=o(e),{_v:n,_r:e,_key:t._key}}:null}function C(e){for(var n={},t=[],r=0;r<e.length;r++){var o=e[r]._key;o?o in n||(n[o]=r):t.push(r)}return[n,t]}return e.prototype.Element=function(){throw Error("You have to specify Element method in your Component, Element must return virtual element")},e.prototype.setState=function(){throw Error("setState(...) can be called only if component is rendered, will be mounted or is mounted")},e.prototype.onComponentRender=e.prototype.onComponentWillUpdate=e.prototype.onComponentUpdate=e.prototype.onComponentWillMount=e.prototype.onComponentMount=e.prototype.onComponentCancelUpdate=e.prototype.getSnapshotBeforeUpdate=e.prototype.componentWillGetProps=e.prototype.onComponentWillUnMount=function(){},e.prototype.shouldComponentUpdate=function(){return!0},e.prototype.isKiqComponent=!0,{Component:e,render:function(n,t,r){window.requestAnimationFrame(function(){if(!t||t.nodeType!==Node.ELEMENT_NODE)throw TypeError("render(...) container must be valid Element that is already rendered on page, try to use DOMContentLoaded event on window to wait for all Elements load");var e=g(n);N(e._v,t,function(){t.appendChild(e._r)}),r&&r()})},createElement:function(e){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,t=null,r=null;"_key"in(n=n||{})&&(t=n._key.toString()),"_ref"in n&&(r=n._ref);for(var o=arguments.length,i=new Array(2<o?o-2:0),u=2;u<o;u++)i[u-2]=arguments[u];return!i.length&&a(e)||(n=l({children:i},n)),{type:e,props:n,_key:t,_ref:r}}}});